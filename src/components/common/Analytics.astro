---
// Official Vercel Analytics - automatically tracks page views and user interactions
---

<script>
  import { inject } from '@vercel/analytics';
  if (import.meta.env.PROD) {
    inject();
  }
  // In development, we skip injection to avoid noisy debug logs
</script>

<script>
  // Optional: Custom event tracking for specific interactions
  import { track } from '@vercel/analytics';
  
  // Track project clicks as custom events
  document.addEventListener('click', (e) => {
    if (e.target && e.target instanceof Element) {
      const target = e.target.closest('a[href*="/projects"]');
      if (target instanceof HTMLAnchorElement) {
        track('project_click', {
          project: target.textContent?.trim() || 'Unknown Project'
        });
      }
    }
  });

  // Track blog post clicks
  document.addEventListener('click', (e) => {
    if (e.target && e.target instanceof Element) {
      const target = e.target.closest('a[href*="/blog"]');
      if (target instanceof HTMLAnchorElement) {
        track('blog_click', {
          post: target.textContent?.trim() || 'Unknown Post'
        });
      }
    }
  });

  // Track contact form submissions
  document.addEventListener('submit', (e) => {
    if (e.target && e.target instanceof HTMLFormElement && e.target.action.includes('contact')) {
      track('contact_form_submit');
    }
  });
</script>
